# Copyright 2023 ETH Zurich and University of Bologna
# Solderpad Hardware License, Version 0.51, see LICENSE for details.
# SPDX-License-Identifier: SHL-0.51

package:
  name: pulp_cluster
  authors:
    - "Pirmin Vogel <vogelpi@lowrisc.org>"
    - "Angelo Garofalo <angelo.garofalo@unibo.it>"
    - "Francesco Conti <f.conti@unibo.it>"
    - "Jie Chen <jie.chen@greenwaves-technologies.com>"
    - "Michael Rogenmoser <michaero@student.ethz.ch>"

dependencies:
  axi2mem:                { git: "https://github.com/pulp-platform/axi2mem.git", rev: "b0e963433b2f6a61262b1448031e74eaec57c203" } # branch: yt/astral
  axi2per:                { git: "https://github.com/pulp-platform/axi2per.git", rev: "4932bd2b88a1c7b5f0bf95411fc512905ed32439" } # branch: yt/astral
  per2axi:                { git: "https://github.com/pulp-platform/per2axi.git", rev: "95bf23119b47fc171d9ed3734c431f71cffd9350" } # branch: yt/astral
  cluster_interconnect:   { git: "https://github.com/pulp-platform/cluster_interconnect.git", rev: 1284def6c0b7f7e9355eb093d00883ad9dead1b7 } # branch: michaero/hci-fix
  event_unit_flex:        { git: "https://github.com/pulp-platform/event_unit_flex.git", rev: 28e0499374117c7b0ef4c6ad81b60d7526af886f } # branch: michaero/hmr
  mchan:                  { git: "https://github.com/pulp-platform/mchan.git", rev: 7f064f205a3e0203e959b14773c4afecf56681ab } # branch: yt/fix-parametrization
  idma:                   { git: "https://github.com/pulp-platform/iDMA.git", rev: 437ffa9dac5dea0daccfd3e8ae604d4f6ae2cdf1 } # branch: master
  hier-icache:            { git: "https://github.com/pulp-platform/hier-icache.git", rev: "2886cb2a46cea3e2bd2d979b505d88fadfbe150c" } # branch: astral
  cluster_icache:         { git: "https://github.com/pulp-platform/cluster_icache.git", rev: "dd0e8f3497903a9ca99fc9f349d5a4f688ceb3ae" } # branch: michaero/astral_reliability
  cluster_peripherals:    { git: "https://github.com/pulp-platform/cluster_peripherals.git", rev: 0b8e8ab } # branch: fc/hci-v2
  axi:                    { git: "https://github.com/pulp-platform/axi.git", version: 0.39.3  }
  timer_unit:             { git: "https://github.com/pulp-platform/timer_unit.git", version: 1.0.2 }
  common_cells:           { git: "https://github.com/pulp-platform/common_cells.git", version: 1.35.0 }
  tech_cells_generic:     { git: "https://github.com/pulp-platform/tech_cells_generic.git", version: 0.2.3 }
  flex-v:                 { git: "https://github.com/pulp-platform/flex-v.git", rev: astral-v1.1 }
  cv32e40p:               { git: "https://github.com/pulp-platform/cv32e40p.git", rev: e863f576699815b38cc9d80dbdede8ed5efd5991 } # `michaero/safety-island-clic` branch
  ibex:                   { git: "https://github.com/pulp-platform/ibex.git", rev: "pulpissimo-v6.1.2" }
  scm:                    { git: "https://github.com/pulp-platform/scm.git", rev: 74426dee36f28ae1c02f7635cf844a0156145320 } # branch: yt/bump-clkgating
  hci:                    { git: "https://github.com/pulp-platform/hci.git", rev: 2a5a5081a2b32f1a04e7e28c00d3762d92602b84 } # branch: yt/wen-filter
  register_interface:     { git: "https://github.com/pulp-platform/register_interface.git", version: 0.4.4  }
  redundancy_cells:       { git: "https://github.com/pulp-platform/redundancy_cells.git", rev: 49e714b97a19a7aaddf064ae2757c8f02d1f62dc } # branch: astral-v0
  redmule:                { git: "https://github.com/pulp-platform/redmule.git", rev: 78696fb0d6d429bdad2e38740792648d44095605 } # branch: main
  neureka:                { git: "https://github.com/pulp-platform/neureka.git", rev: f4e131c86205d37882cf02ea4dd3bd141ef32d86 } # branch: lg/astral-v1.1
  softex:                 { git: "https://github.com/belanoa/softex.git"       , rev: astral-v1.0 }

export_include_dirs:
  - include

sources:
    # Source files grouped in levels. Files in level 0 have no dependencies on files in this
    # package. Files in level 1 only depend on files in level 0, files in level 2 on files in
    # levels 1 and 0, etc. Files within a level are ordered alphabetically.
    # Level 0
  - packages/pulp_cluster_package.sv
  - rtl/axi2mem_wrap.sv
  - rtl/axi2per_wrap.sv
  - rtl/cluster_bus_wrap.sv
  - rtl/cluster_clock_gate.sv
  - rtl/cluster_event_map.sv
  - rtl/cluster_timer_wrap.sv
  - rtl/obi_pulp_adapter.sv
  - target: mchan
    files:
      - rtl/mchan_wrap.sv
  - target: not(mchan)
    files:
      - rtl/idma_wrap.sv
  - rtl/hwpe_subsystem.sv
  - rtl/instr_width_converter.sv
  - rtl/per2axi_wrap.sv
  - rtl/periph_demux.sv
  - rtl/per_demux_wrap.sv
  - rtl/periph_FIFO.sv
  - rtl/tcdm_banks_wrap.sv
  - rtl/xbar_pe_wrap.sv
    # Level 1
  - rtl/cluster_interconnect_wrap.sv
  - rtl/cluster_peripherals.sv
  - rtl/data_periph_demux.sv
  - rtl/core_demux_wrap.sv
  - rtl/core_region.sv
  - target: simulation
    files:
    defines:
      TRACE_EXECUTION: ~
    # Level 3
  - rtl/pulp_cluster.sv
  - rtl/pulp_cluster_wrap.sv

  - target: test
    files:
      - tb/mock_uart.sv
      - tb/mock_uart_axi.sv
      - tb/pulp_cluster_tb.sv

  - target: cluster_standalone
    files:
      - include/pulp_interfaces.sv

  - target: pulp_standalone_synth
    files:
    - nonfree/gf12/sourcecode/tc_sram.sv
    - nonfree/gf12/sourcecode/tc_clk.sv

